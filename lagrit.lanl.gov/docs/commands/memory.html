<HTML>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="Content-Type">
  <meta name="LaGriT command memory "
 content="Description metadata should be 25-30 words and written from the specific to the general. Put your top keywords first but don't repeat title information.">
  <meta name="Keywords" content=" ">
  <link media="all" title="LANLScreenStyle" href="../styles/site.css"
 type="text/css" rel="stylesheet">
  <link media="print" href="http://www.lanl.gov/styles/xprint.css"
 type="text/css" rel="stylesheet">
  <meta http-equiv="Content-Type"
 content="text/html; charset=ISO-8859-1">
  <meta name="Generator" content="Microsoft Word 97">
  <meta name="GENERATOR"
 content="Mozilla/4.79C-SGI [en] (X11; U; IRIX64 6.5 IP30) [Netscape]">
  <title>memory</title>
</head>
<body style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
 alink="#ff0000" link="#0000ee" vlink="#551a8b">
<br>
<h2> memory</h2>
 

<dir><font face="Times New Roman,Times">These commands report the current state of LaGriT's dynamic memory allocation.
LaGriT arrays are referenced by memory management by a two part name, block name and partition name.
It is allocated in integer or real blocks(real is implemented as real*8).
Each memory block is preceeded by a header and terminated by a trailer.
Different platforms will have different values for
integer and real word lengths. LaGriT developers read more on LaGriT memory management at 
<b><a href="../memmang.html">Memory Manager</a></font></b>
 
</font>

<br><br>
<br><font face="Times New Roman,Times">The following memory keywords 
are recognized:</font>
<br>

<BLOCKQUOTE>&nbsp;
<BR><FONT FACE="Times"><B>memory / verify &nbsp;</B>
<br>verify the integerity of LaGriT memory manager storage by checking that the known blocks have not been overwritten. If corruption is detected, an array map will be printed. Nothing is printed if there memory is successfully verified.</FONT>
<br>
<br>
<BR><FONT FACE="Times"><B>memory / print &nbsp;</B>
<br>print an address map of the LaGriT managed arrays. For each array the following is printed; index, length, type, memory address, associated name, and partition. The partition is the grouping of arrays by usage. Common partitions include the mesh object (by name), global memory, and temporary memory for work arrays. </FONT>
<br>
<pre>
MEMORY SIZES : 
 Sizeof char    (type 3) =  1 bytes      Sizeof long        =   4 bytes
 Sizeof real*8  (type 2) =  8 bytes      Sizeof pointer     =   4 bytes
 Sizeof integer (type 1) =  4 bytes      Sizeof INT_PTRSIZE =   4 bytes

INDEX         LENGTH    TYPE     ADDRESS     NAME                           PARTITION
  29          40000000   2     -1894248416 xic                              cmo1    
   1                10   3       143632720 global_name                      global_lg
  31          40000000   2      1760710688 zic                              cmo1    
  30          40000000   2      2080714784 yic                              cmo1   

Total BYTES =    2.400E+09   Total MEGABYTES =    2.400E+03

</pre>
<br>
<BR><FONT FACE="Times"><B>memory / maxmalloc &nbsp;</B>
<br>Report estimate of possible amount of memory available for allocation by LaGriT. This test will make incremental calls to internal LaGriT memory allocation (mmgetblk) until failure. The report will include the total Megabytes where allocation succeeded, and amount at which allocation failed. This command will also print a map of the memory manager storage.</FONT>
<pre>
 .... 

 MMGETBLK ERROR: value exceeds sizeof:            4
 MAX ALLOC SIZE:    4294967296.0000000     
 ATTEMPTED SIZE:    6553600048.0000000     
 MMGETBLK: return early with error flag:          -21
  
 Succeeded at     819.20000000000005       MEGABYTES
 Failed at        1638.4000000000001       MEGABYTES

 
</pre>
<br>The 64 bit version for memory routines will look slightly different:
<br>
<pre>
MEMORY SIZES : 
 Sizeof char    (type 3) =  1 bytes      Sizeof long        =   8 bytes
 Sizeof real*8  (type 2) =  8 bytes      Sizeof pointer     =   8 bytes
 Sizeof integer (type 1) =  4 bytes      Sizeof INT_PTRSIZE =   8 bytes

....

util_malloc_: Out of memory, malloc return: (nil) 
   Requested value: 104857600000.000000 =    8 bit unsigned int 
 MMGETBLK FAILED: Array array_01 with bytes:          104857600096
 MMGETBLK: return ending with error flag:                    -1
  
 Succeeded at     52428.800000000003       MEGABYTES
 Failed at        104857.60000000001       MEGABYTES


</pre>


</BLOCKQUOTE>
<br><br>

<FONT FACE="Times">EXAMPLES:</FONT>
<DIR>
<BR><FONT FACE="Times"><B>memory / </FONT><FONT FACE="Courier">verify </B></FONT>
<BR><FONT FACE="Times"><B>memory / </FONT><FONT FACE="Courier">print </B></FONT>
<BR><FONT FACE="Times"><B>memory / </FONT><FONT FACE="Courier">maxmalloc </B></FONT>

</DIR>
&nbsp;</BLOCKQUOTE>
 
</BODY>
</HTML>
